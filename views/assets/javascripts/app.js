"use strict";$(function(){$(document).on("click.qor.alert",'[data-dismiss="alert"]',function(){$(this).closest(".qor-alert").removeClass("qor-alert__active")}),setTimeout(function(){$('.qor-alert[data-dismissible="true"]').removeClass("qor-alert__active")},5e3)}),$(function(){$(document).on("click",".qor-dialog--global-search",function(e){e.stopPropagation(),$(e.target).parents(".qor-dialog-content").length||$(e.target).is(".qor-dialog-content")||$(".qor-dialog--global-search").remove()}),$(document).on("click",".qor-global-search--show",function(e){e.preventDefault();var a=$(this).data(),o=window.Mustache.render('<div class="qor-dialog qor-dialog--global-search" tabindex="-1" role="dialog" aria-hidden="true"><div class="qor-dialog-content"><form action=[[actionUrl]]><div class="mdl-textfield mdl-js-textfield" id="global-search-textfield"><input class="mdl-textfield__input ignore-dirtyform" name="keyword" id="globalSearch" value="" type="text" placeholder="" /><label class="mdl-textfield__label" for="globalSearch">[[placeholder]]</label></div></form></div></div>',a);$("body").append(o),window.componentHandler.upgradeElement(document.getElementById("global-search-textfield")),$("#globalSearch").focus()})}),$(function(){var l=[],s="qoradmin_menu_status",e=localStorage.getItem(s);e&&e.length&&(l=e.split(",")),$(".qor-menu-container").on("click","> ul > li > a",function(){var e=$(this),a=e.parent(),o=e.next("ul"),t=a.attr("qor-icon-name");o.length&&(o.hasClass("in")?(l.push(t),a.removeClass("is-expanded"),o.one("transitionend",function(){o.removeClass("collapsing in")}).addClass("collapsing").height(0)):(l=_.without(l,t),a.addClass("is-expanded"),o.one("transitionend",function(){o.removeClass("collapsing")}).addClass("collapsing in").height(o.prop("scrollHeight"))),localStorage.setItem(s,l))}).find("> ul > li > a").each(function(){var e=$(this),a=e.parent(),o=e.next("ul"),t=a.attr("qor-icon-name");o.length&&(o.addClass("collapse"),a.addClass("has-menu"),-1!=l.indexOf(t)?o.height(0):(a.addClass("is-expanded"),o.addClass("in").height(o.prop("scrollHeight"))))});var a=$(".qor-page > .qor-page__header"),o=$(".qor-page > .qor-page__body"),t=a.find(".qor-page-subnav__header").length?96:48;a.length&&(a.height()>t&&o.css("padding-top",a.height()),$(".qor-page").addClass("has-header"),$("header.mdl-layout__header").addClass("has-action"))}),$(function(){$(".qor-mobile--show-actions").on("click",function(){$(".qor-page__header").toggleClass("actions-show")})}),$(function(){function p(){return f.hasClass("qor-bottomsheets-open")}var m,q,f=$("body"),b="is-selected";function _(e){$("[data-url]").removeClass(b),e&&e.length&&e.addClass(b)}f.qorBottomSheets(),f.qorSlideout(),m=f.data("qor.slideout"),q=f.data("qor.bottomsheets"),$(document).on("click.qor.openUrl","[data-url]",function(e){var a,o,t,l=$(this),s=$(e.target),n=l.hasClass("qor-button--new"),r=l.hasClass("qor-button--edit"),i=(l.is(".qor-table tr[data-url]")||l.closest(".qor-js-table").length)&&!l.closest(".qor-slideout").length,d=l.data(),c=d.openType,h=l.parents(".qor-theme-slideout").length,u=l.closest(".qor-slideout").length,g=l.hasClass("qor-action-button")||l.hasClass("qor-action--button");if(e.stopPropagation(),!(l.data("ajax-form")||s.closest(".qor-table--bulking").length||s.closest(".qor-button--actions").length||!s.data("url")&&s.is("a")||i&&p()))if("window"!=c){if("new_window"!=c)return g&&(o=$(".qor-js-table tbody").find(".mdl-checkbox__input:checked"),t=[],(a=!!o.length&&(o.each(function(){t.push($(this).closest("tr").data("primary-key"))}),t))&&(d=$.extend({},d,{actionData:a}))),d.$target=s,d.method&&"GET"!=d.method.toUpperCase()?void 0:("bottomsheet"!=c&&!g||"slideout"==c?"slideout"==c||i||n&&!p()||r?"slideout"==c||h?l.hasClass(b)?(m.hide(),_()):(m.open(d),_(l)):window.location.href=d.url:!(f.hasClass("qor-slideout-open")||n&&p())&&h?m.open(d):q.open(d):g&&!a&&l.closest('[data-toggle="qor.action.bulk"]').length&&!u?window.QOR.qorConfirm(d.errorNoItem):q.open(d),!1);window.open(d.url,"_blank")}else window.location.href=d.url})}),$(function(){var l=window.location;$(".qor-search").each(function(){var e=$(this),a=e.find(".qor-search__input"),o=e.find(".qor-search__clear"),t=!!a.val();e.closest(".qor-page__header").addClass("has-search"),$("header.mdl-layout__header").addClass("has-search"),o.on("click",function(){a.val()||t?"?"==l.search.replace(new RegExp(a.attr("name")+"\\=?\\w*"),"")?l.href=l.href.split("?")[0]:l.search=l.search.replace(new RegExp(a.attr("name")+"\\=?\\w*"),""):e.removeClass("is-dirty")})})});